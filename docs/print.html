<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Date and Time</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="chapter1.html"><strong aria-hidden="true">1.</strong> Date and Time Fundamentals</a></li><li class="chapter-item expanded "><a href="chapter2.html"><strong aria-hidden="true">2.</strong> Context Matter</a></li><li class="chapter-item expanded "><a href="chapter3.html"><strong aria-hidden="true">3.</strong> Time Zones</a></li><li class="chapter-item expanded "><a href="chapter4.html"><strong aria-hidden="true">4.</strong> Date and Time Formats</a></li><li class="chapter-item expanded "><a href="chapter5.html"><strong aria-hidden="true">5.</strong> Common Mistakes and Best Practices</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Date and Time</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="date-and-time-fundamentals"><a class="header" href="#date-and-time-fundamentals">Date and Time Fundamentals</a></h1>
<p>All the notes here are from Matt Johnson's course in PluralSight on
<a href="https://www.pluralsight.com/courses/date-time-fundamentals">Date and Time
fundamentals</a>.</p>
<h1 id="the-human-problem"><a class="header" href="#the-human-problem">The Human Problem</a></h1>
<ul>
<li>Clocks and calendars are human devices.</li>
<li>Humans tend to think about time locally.</li>
<li>Julius Caesar created <a href="https://en.wikipedia.org/wiki/Julian_calendar">Julian
Calender</a>.</li>
<li>Pope Gergory XIII created <a href="https://en.wikipedia.org/wiki/Gregorian_calendar">Gergorian
calender</a>.
<ul>
<li>This is the most commonly used calender in the world.</li>
<li>Changes made to how leap years are determined.</li>
<li>Ommitted 10 days from October. So basically October 5th, 1582
didn't exist. More details in the wikipedia page.</li>
</ul>
</li>
<li>Other calenders: Hebrew, Buddhism, Islamic etc.</li>
<li>ISO-8601 - International Standards for Date and Time.
<ul>
<li>This is what most computer systems follow.</li>
<li>It also defines the calender system as Proleptic Gregorian
Calender. It's also called as ISO calender.</li>
</ul>
</li>
</ul>
<h1 id="universal-time"><a class="header" href="#universal-time">Universal Time</a></h1>
<ul>
<li>Single global point of reference. No Time Zones.</li>
<li>Synchronized via Network Time Protocol (NTP)</li>
<li>The first basis for a Universal time was GMT or Greenwich Mean Time.
<ul>
<li>Since 1847.</li>
</ul>
</li>
<li>UTC = Coordinated Universal Time
<ul>
<li>Happened in 1972</li>
<li>Preferred modern reference point</li>
</ul>
</li>
<li>Primary difference between UTC and GMT:
<ul>
<li>GMT has a civil definition.</li>
<li>UTC has scientific definition. UTC also uses atomic clocks.</li>
</ul>
</li>
<li>UTC also has leap seconds.
<ul>
<li>These are one second periods that are added to the time scale to
keep it perfectly in sync with another time scale called UT1.</li>
</ul>
</li>
<li>Both UTC and UT1 are intended to stay in sync with earth's rotation.
<ul>
<li>UTC is measured by atomic clocks.</li>
<li>UT1 is measured by observing astronomical phenomenon.</li>
<li>Because they aren't always in sync, we get leap seconds.</li>
</ul>
</li>
<li>GMT or UTC ?
<ul>
<li>There isn't much difference between then in modern times.</li>
<li>In modern times, GMT is kept perfectly in sync with UTC. And
hence the difference between them doesn't matter.</li>
</ul>
</li>
<li>Use UTC when:
<ul>
<li>As a timekeeping system</li>
<li>As the reference point for a time zone offset. (UTC-07:00)</li>
</ul>
</li>
<li>Use GMT:
<ul>
<li>As part of the UK's time zone (GMT/BST)</li>
<li>Civil purpose</li>
</ul>
</li>
</ul>
<h1 id="daylight-saving-time"><a class="header" href="#daylight-saving-time">Daylight Saving Time</a></h1>
<ul>
<li>Government mandated clock adjustments.</li>
<li>Usually the clock is advanced forward by an hour in the spring, and
is retracted backwards by an hour in the fall.</li>
<li>Also known as &quot;Summer time&quot;.</li>
<li>Does not occur in every time zone.</li>
<li>Not applied the same way in every year. There is no guarantee that
it's going to be the same in future years.</li>
</ul>
<h2 id="spring-forward-transition"><a class="header" href="#spring-forward-transition">Spring Forward Transition</a></h2>
<ul>
<li>Local time advances forward
<ul>
<li>Usually by 1 hour</li>
</ul>
</li>
<li><img src="./images/sprint_forward_transition.png" alt="" /></li>
<li>Creates a &quot;gap&quot; of missing local time.</li>
<li><img src="./images/sft_graph.png" alt="" /></li>
</ul>
<h2 id="fall-back-transition"><a class="header" href="#fall-back-transition">Fall Back Transition</a></h2>
<ul>
<li>Local time rewinds backwards
<ul>
<li>Usually by 1 hour</li>
</ul>
</li>
<li><img src="./images/fall_back_transition.png" alt="" /></li>
<li>Creates an &quot;overlap&quot; of ambiguous local time.</li>
<li><img src="./images/fbt_graph.png" alt="" /></li>
</ul>
<p>Software recommendation: If you are going to record value in terms of
local time, then you must also include the offset from UTC so that
during the overlap you can distinguish between the two possible
instances.</p>
<p><a href="https://www.timeanddate.com/"><a href="https://www.timeanddate.com/">https://www.timeanddate.com/</a></a> is a good
reference to learn more details.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="context-matter"><a class="header" href="#context-matter">Context Matter</a></h1>
<ul>
<li>In software, make sure to preserve context using better types.</li>
<li>Some context for date and time:
<ul>
<li>UTC for DateTime</li>
<li>DateTimeOffset instead of storing local time.</li>
</ul>
</li>
</ul>
<h1 id="formatting"><a class="header" href="#formatting">Formatting</a></h1>
<ul>
<li>Use 4 digit year in formatting to avoid confusion.</li>
<li>ISO-8601 standard provides format for unambiguos interpretation.
(MM/DD/YY vs DD/MM/YY)</li>
<li>ISO-8601 recommendation
<ul>
<li>Simple Format (YYYY-MM-DD)</li>
</ul>
</li>
</ul>
<h1 id="scope"><a class="header" href="#scope">Scope</a></h1>
<ul>
<li>Date and Time
<ul>
<li>Example: <code>2013-12-31 22:00:00</code></li>
<li>Suitable for event time. Eg: Application log, Date of comment</li>
</ul>
</li>
<li>Date
<ul>
<li>Example: <code>2013-12-31</code></li>
<li>Suitable for just dates. Eg: Birthdate</li>
</ul>
</li>
<li>Time Of Day
<ul>
<li>Example: <code>10:00:00 PM</code></li>
<li>AM/PM is called meridiem. It's a latin word meaning midday.</li>
<li>AM stands for ante meridiem or before midday.</li>
<li>PM stands for post meridiem or after midday.</li>
<li>Use cases: Businss hours</li>
</ul>
</li>
<li>Elapsed Time
<ul>
<li>Example: 33 hours, 15 minutes etc.</li>
<li>Use case: Duration of Activity.</li>
</ul>
</li>
<li>Imperfect Time Period
<ul>
<li>Example: 1 year, 3 months, 10 days etc.</li>
<li>Use case: Estimate, Scheduling</li>
</ul>
</li>
</ul>
<h1 id="perspective"><a class="header" href="#perspective">Perspective</a></h1>
<ul>
<li>Unspecified Perspective
<ul>
<li>Example <code>2013-12-31 10:00:00</code></li>
<li>Could be local time, but we should avoid making such
assumptions.</li>
<li>It could be useful for &quot;floating times&quot;. Could refer to 10'o
clock local time for anytime zone. (Useful for television show
broadcast). It's time value doesn't change when you use it in
other time zone.</li>
</ul>
</li>
<li>Universal Perspective
<ul>
<li>Example <code>2013-12-31 16:00:00 UTC</code></li>
<li>Instead of <code>UTC</code> above, it's also specified as <code>GMT</code> or marked
by a letter <code>Z</code> which stands for Zulu time. Zulu time is just a
military way of specifying GMT.</li>
<li>It's completely unambiguos. Represents a fixed moment of time
regardless of any time zones.</li>
</ul>
</li>
<li>Local Perspective (Sibi: Todo - Go through the video again)
<ul>
<li>By Offset (<code>2013-12-31 22:00:00 -06:00</code>)
<ul>
<li>Offset to UTC is mentioned</li>
</ul>
</li>
<li>By Time Zone (<code>2013-12-31 22:00:00 Central</code>)
<ul>
<li>Good to know background information about <a href="https://www.timeanddate.com/time/zones/ct">Central
Time</a>.</li>
</ul>
</li>
<li>By Time Zone Segment (<code>2013-12-31 22:00:00 CST</code>)
<ul>
<li>CST: Central Standard time</li>
<li>Recommendation: Avoid time zone abbreviations when storing
inside computer. (Fine to show it in UI, but not recommended
otherwise)</li>
</ul>
</li>
<li>By Time Zone &amp; Offset
<ul>
<li>Example <code>2013-12-31 22:00:00 -06:00 Central</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="calender-time"><a class="header" href="#calender-time">Calender Time</a></h1>
<ul>
<li>It's a position on a calender or a clock.</li>
<li>Use cases:
<ul>
<li>Future scheduled events. It's best to use this instead of UTC
timestamp because your events might run at wrong time after a
Daylight saving transition.</li>
</ul>
</li>
</ul>
<h1 id="instantaneous-time"><a class="header" href="#instantaneous-time">Instantaneous Time</a></h1>
<ul>
<li>Can use date and time in UTC to refer to a particular instant.</li>
<li>Use cases:
<ul>
<li>Recording past events</li>
<li>Future Absolute Events</li>
<li>Calculations
<ul>
<li>Adding or subtracing time</li>
<li>Determining duration between them</li>
<li>Recommendation: If you are planning to perform computation
in date time, best to convert to UTC before performing them.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="time-zones"><a class="header" href="#time-zones">Time Zones</a></h1>
<h2 id="what-is-a-time-zone"><a class="header" href="#what-is-a-time-zone">What is a Time Zone</a></h2>
<ul>
<li>A Time Zone is a Geographic Region.
<ul>
<li>Follows the same local clock.</li>
<li>Abides by the same set of timekeeping rules.</li>
<li>Usually determined by Law.</li>
</ul>
</li>
<li>A Time Zone is NOT an offset.
<ul>
<li>Offsets are only a part of a time zone.</li>
<li>More than one offset might apply, at different parts of the
year.</li>
</ul>
</li>
<li>Defines the configuration of local clocks.
<ul>
<li>Covers all time within the region.</li>
</ul>
</li>
<li>Has a common or legal name. Eg: IST</li>
<li>Has a standard offset from UTC.</li>
<li>Includes Daylight Saving Time Rules.
<ul>
<li>Transition Date patterns.</li>
<li>Transition Times</li>
<li>Transition Amount (1 hour etc)</li>
</ul>
</li>
<li>Includes History of Changes (like git!)
<ul>
<li>DST Rules</li>
<li>Offsets</li>
<li>Alignments: that occur by each time zone transitioning by a
fractional amount to line up with UTC. (Alignments are offset
changes but done with the intention of aligning with UTC)</li>
</ul>
</li>
<li>Time Zones are set by Governments.
<ul>
<li>Expect Suprises and Oddities.</li>
<li>Changes Occur Often</li>
</ul>
</li>
<li>Reason for Time Zone Changes
<ul>
<li>Trade/Commerce</li>
<li>Religious Observations</li>
</ul>
</li>
</ul>
<h2 id="time-zone-fallacies"><a class="header" href="#time-zone-fallacies">Time Zone Fallacies</a></h2>
<p>The below mentioned points are false. Reasoning is explained on why they
are false:</p>
<ul>
<li>Time zone is a numeric offset from UTC.
<ul>
<li>Many time zones share offsets.</li>
<li>Even though some time zones may carry the same offset at some
point, the way they use that offset is very different. So a time
zone is much more than simply being a numeric offset from UTC.</li>
</ul>
</li>
<li>Time zone names and abbreviations are unique.
<ul>
<li>Counterexample: IST
<ul>
<li>Israel Stanard Time - UTC+02:00</li>
<li>India Standard Time - UTC+05:300</li>
<li>Irish Standard Time - UTC+01:00</li>
</ul>
</li>
</ul>
</li>
<li>Local people know their time zone and how to abbreviate it.
<ul>
<li>Counterexample: Hawaii
<ul>
<li>According to Government: HAST - Hawaii Aleutian Stanard Time</li>
<li>According to People: HST - Hawaiian Stanard Time</li>
</ul>
</li>
</ul>
</li>
<li>An entire state follows the same rules for daylight saving times
<ul>
<li>Counterexample: Part of Arizona</li>
</ul>
</li>
<li>Outside of USA, if I know what country a person is in, I can
determine their time zone.
<ul>
<li>Counterexample: Brazil</li>
</ul>
</li>
<li>Time zones will never change, so I only have to think about them
when I first build my application.
<ul>
<li>Recommendation:
<ul>
<li>Do not assume UTC offset of future calender dates.</li>
<li>Keep your Time Zone Data updated.</li>
<li>Use a Time Zone Database.</li>
</ul>
</li>
</ul>
</li>
<li>There can only be two daylight saving time transitions in any given
year. Counterexample: Egypt</li>
</ul>
<h2 id="the-iana-time-zone-database"><a class="header" href="#the-iana-time-zone-database">The IANA Time Zone Database</a></h2>
<ul>
<li>IANA: Internet Assigned Numbers Authority</li>
<li>Known by sereral names
<ul>
<li>IANA</li>
<li>Olson</li>
<li>TZDB</li>
<li>TZ</li>
<li>ZoneInfo</li>
</ul>
</li>
<li>Identifier Format: Area/Location
<ul>
<li>Examples:
<ul>
<li>America/New<sub>York</sub></li>
<li>America/Indiana/Knox</li>
</ul>
</li>
</ul>
</li>
<li>Historical accurancy at least since 1970.</li>
<li>Data in this database doesn't come from IANA, but it's community
maintained. It's frequently updated.</li>
</ul>
<h2 id="microsoft-time-zone-database"><a class="header" href="#microsoft-time-zone-database">Microsoft Time Zone Database</a></h2>
<ul>
<li>Built in to Windows operating system.</li>
<li>Maintained by Microsoft, not a stanard body or community.</li>
<li>Zones are sometimes poorly defined.</li>
<li>Very limited historical data.</li>
<li>Strange Zone Identifiers.</li>
<li>Recommendation: Avoid this and use IANA database</li>
</ul>
<h2 id="the-unicode-cldr"><a class="header" href="#the-unicode-cldr">The Unicode CLDR</a></h2>
<ul>
<li>Not a time zone database.</li>
<li>Source of data for localized translations.
<ul>
<li>Time Zone Names</li>
<li>Dates, Times, Numbers, Currency and much more.</li>
</ul>
</li>
<li>Contains &quot;MetaZones&quot;
<ul>
<li>Groups of Time Zones that can span countries.</li>
</ul>
</li>
<li>Contains Translations of Windows Zones to IANA Zones.</li>
</ul>
<h2 id="rails-time-zones"><a class="header" href="#rails-time-zones">Rails Time Zones</a></h2>
<ul>
<li>Ruby on Rails has it's own time zones.</li>
<li>Uses the same IANA time zone database.</li>
<li>Limited subset of 146 &quot;meaningful&quot; zones.
<ul>
<li>Poorly defined criteria</li>
</ul>
</li>
</ul>
<h2 id="posix-time-zones"><a class="header" href="#posix-time-zones">POSIX Time Zones</a></h2>
<ul>
<li>POSIX = Portable Operating System Interface</li>
<li>You'll see POSIX time zones in C/C++ applications.</li>
<li>Examples:
<ul>
<li>PST8PDT: In Pacific Stanard time the offset is 8 and when
daylight saving time occurs, we will call it as Pacific Daylight
time.</li>
<li>EST5EDT4,M3.2.0/02:00,M11.1.0/02:00</li>
</ul>
</li>
<li>Cryptic, Error Prone</li>
<li>Limited to 2 transitions per year</li>
<li>Contains only current rules</li>
<li>Recommendation: Do not use. Treat as deprecated.</li>
<li>GNU C library contains many time zone functions that will work with
IANA database.</li>
<li>Other alternatives: ICU4C</li>
<li>Do not use Boost time zone APIs.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="date-and-time-formats"><a class="header" href="#date-and-time-formats">Date and Time Formats</a></h1>
<h2 id="iso-8601-extended-format"><a class="header" href="#iso-8601-extended-format">ISO 8601 &quot;Extended&quot; Format</a></h2>
<ul>
<li>YYYY-MM-DD
<ul>
<li>Single digit number aren't allowed. So a number start with zero
if it's a single digit number.</li>
</ul>
</li>
<li>HH:MM:SS
<ul>
<li>SS is optional.</li>
<li>24 hour clock.</li>
</ul>
</li>
<li>HH:MM:SS.ffffff
<ul>
<li>Stanards doen't represent the number of decimal places.</li>
<li>Can use comma instead of dot in decimal space.</li>
</ul>
</li>
<li>HH:MM:SS.ffffffZ
<ul>
<li>UTC</li>
</ul>
</li>
<li>HH:MM:SS.ffffffZ[+/-]HH</li>
<li>HH:MM:SS.ffffffZ[+/-]HH:MM</li>
<li>YYYY-MM-DDTHH:MM:SS
<ul>
<li>Use &quot;T&quot; to combine date and time.</li>
</ul>
</li>
<li>YYYY-MM-DDTHH:MM:SS.ffffff</li>
<li>YYYY-MM-DDTHH:MM:SS.ffffffZ</li>
<li>YYYY-MM-DDTHH:MM:SS.ffffffZ[+/-]HH</li>
<li>YYYY-MM-DDTHH:MM:SS.ffffffZ[+/-]HH:MM</li>
</ul>
<h2 id="iso-8601-basic-format"><a class="header" href="#iso-8601-basic-format">ISO 8601 &quot;Basic&quot; Format</a></h2>
<ul>
<li>Same as extended format but with most of the separation characters
removed.</li>
<li>YYYYMMDD</li>
<li>HHMMSS</li>
<li>HHMMSS.ffffff</li>
<li>HHMMSS.ffffffZ</li>
<li>HHMMSS.ffffffZ[+/-]HH</li>
<li>HHMMSS.ffffffZ[+/-]HHMM</li>
<li>YYYYMMDDTHHMMSS</li>
<li>YYYYMMDDTHHMMSSffffff</li>
<li>YYYYMMDDTHHMMSSffffffZ</li>
<li>YYYYMMDDTHHMMSSffffffZ[+/-]HH</li>
<li>YYYYMMDDTHHMMSSffffffZ[+/-]HHMM</li>
<li>Treat them as strings instead of integers.</li>
</ul>
<h2 id="rfc-3339"><a class="header" href="#rfc-3339">RFC 3339</a></h2>
<ul>
<li>Examples:
<ul>
<li>2013-12-31T01:23:45.123Z (date and time at UTC)</li>
<li>2013-12-31T01:23:45.123+05:30 (date and time with an offset)</li>
</ul>
</li>
<li>Good way to think that RFC 3339 is a subset of ISO-8601 extended
format.</li>
<li>This RFC is specifically for timestamps.
<ul>
<li>Date and time are both required.</li>
<li>Seconds are required, decimals are optional.</li>
<li>UTC (&quot;Z&quot;) or Offsets is required.</li>
<li>All punctuation is required (<code>T</code>, <code>:</code>)</li>
<li>Midnight is always <code>00:00:00~</code></li>
</ul>
</li>
<li>Allows for negative zero offset (-00:00)
<ul>
<li>UTC is known, but implies an <code>Unknown Local Offset</code></li>
</ul>
</li>
</ul>
<h2 id="rfc-8221123"><a class="header" href="#rfc-8221123">RFC 822/1123</a></h2>
<ul>
<li>Originated in RFC 822 and modified in RFC 1123.</li>
<li>Examples:
<ul>
<li>Tue, 31 Dec 2013 01:23:45 GMT</li>
<li>Tue 31 Dec 2013 01:23:45 GMT+0530</li>
<li>Tue 31 Dec 2013 01:23:45 EST (Not a good idea)</li>
</ul>
</li>
<li>Used in HTTP headers.</li>
<li>Used by JavaScript, but being phased out.</li>
<li>Limitations:
<ul>
<li>No fractional seconds.</li>
<li>English Abbreviations only.</li>
<li>Poor use of Time Zone Abbreviations.</li>
<li>Extraneous Day of Week</li>
</ul>
</li>
</ul>
<h2 id="unix-time"><a class="header" href="#unix-time">Unix Time</a></h2>
<ul>
<li>Integer Timestamp.</li>
<li>Seconds since Janaury 1st 1970 UTC
<ul>
<li>Or in milliseconds.</li>
</ul>
</li>
<li>Also known (erroneously) as Epoch time.
<ul>
<li>The world Epoch just means the date that you are basing
something on which in this case is Janaury 1st 1970 UTC.</li>
</ul>
</li>
<li>Advantages: Simple numerical storage, Easy for mathematics.</li>
<li>Disadvantages: Not human readable, Does not account for time zones
or leap seconds.</li>
<li>Recommendation: Good internal format, but don't expose externally.</li>
<li>For Rest services, use ISO 8601 Format.</li>
</ul>
<h2 id="ole-automation-dates"><a class="header" href="#ole-automation-dates">OLE Automation Dates</a></h2>
<ul>
<li>Object linking and Embedding.</li>
<li>Early stanard from Microsoft.</li>
<li>Used in Microsoft Office and COM.</li>
<li>Floating Point Number.</li>
<li>Whole and fractional standard days.</li>
<li>Ambiguous Epoch.
<ul>
<li>Usually Dec 30th, 1899</li>
<li>Sometimes Dec 31st, 1899</li>
</ul>
</li>
<li>Unspecified reference (not necessarily UTC or local time). Left to
the application.</li>
<li>Recommendations
<ul>
<li>Limit usage to COM interop scenarios.</li>
</ul>
</li>
</ul>
<h2 id="time-span-format"><a class="header" href="#time-span-format">Time Span Format</a></h2>
<ul>
<li>No standard</li>
<li>Similar to Time of Day, but for Elapsed time</li>
<li>HH:MM:SS.fffffff</li>
</ul>
<h2 id="iso-8601-duration-formats"><a class="header" href="#iso-8601-duration-formats">ISO 8601 Duration Formats</a></h2>
<ul>
<li>Uses
<ul>
<li>Calender based periods</li>
<li>Elapsed duration of time</li>
<li>Computed Values</li>
</ul>
</li>
<li>Examples:
<ul>
<li>P3Y: Period of 3 years.</li>
<li>P5M: 5 months</li>
<li>P8W: 8 weeks</li>
<li>P15D: 15 calender days</li>
</ul>
</li>
<li>Elapsed time periods
<ul>
<li>PT36H: 36 hours
<ul>
<li>Extra capital T</li>
</ul>
</li>
<li>PT90M: 90 minutes</li>
<li>PT2S: 2 seconds</li>
</ul>
</li>
<li>Compound Value examples
<ul>
<li>P3Y5M8W15DT36H90M2.576S
<ul>
<li>T in middle, separates date and minutes.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="json-date-formats"><a class="header" href="#json-date-formats">JSON Date Formats</a></h2>
<ul>
<li>JSON = JavaScript Object Notation</li>
<li>Does not define a date format.</li>
<li>Options:
<ul>
<li>ISO 8601 Extended Format</li>
<li>Unix time</li>
<li>ASP.NET Format
<ul>
<li>Example: <code>/Date(1388453025123)/</code></li>
<li>The number is Unix time in milliseconds.</li>
<li>Created by Microsoft.</li>
</ul>
</li>
</ul>
</li>
<li>Recommendation: Use ISO 8601 Format</li>
</ul>
<h2 id="xml-date-formats"><a class="header" href="#xml-date-formats">XML Date formats</a></h2>
<ul>
<li>XML does not define a date format.</li>
<li>XSD uses the ISO 8601 Extended format.</li>
<li>Types:
<ul>
<li>xsd:date</li>
<li>xsd:time</li>
<li>xsd:dateTime</li>
<li>xsd:duration</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="common-mistakes-and-best-practices"><a class="header" href="#common-mistakes-and-best-practices">Common Mistakes and Best Practices</a></h1>
<h2 id="understand-the-context"><a class="header" href="#understand-the-context">Understand the Context</a></h2>
<ul>
<li>Date + Time vs Date Only</li>
<li>Time of Day vs Elasped Time</li>
<li>Elapsed Duration vs Calenderic Period</li>
</ul>
<h2 id="understanding-time-zone"><a class="header" href="#understanding-time-zone">Understanding Time Zone</a></h2>
<ul>
<li>Time Zone != Offset</li>
<li>Without referencing a point in time, you cannot know offset is in
effect in a given time zone.</li>
<li>Time zone abbreviations are often ambiguous.</li>
<li>Time Zones change.</li>
</ul>
<h2 id="calculating-durations"><a class="header" href="#calculating-durations">Calculating Durations</a></h2>
<ul>
<li>10 AM - 1 AM = 9 hours ? Right
<ul>
<li>Not always! Could be 8 hours or 10 hours.</li>
</ul>
</li>
<li>Avoid calculating in local time.</li>
<li>Use UTC for calculations.
<ul>
<li>12:00Z - 03:00Z = 9 hours</li>
</ul>
</li>
<li>Alternatively, include an offset.
<ul>
<li>10:00-02-01:00-02 = 9 hours</li>
<li>10:00-01-01:00-02 = 8 hours</li>
<li>10:00-02-01:00-01 = 10 hours</li>
</ul>
</li>
</ul>
<h2 id="logging"><a class="header" href="#logging">Logging</a></h2>
<ul>
<li>If you're logging in local time, then it can be lead to problem.
<ul>
<li>Local time values are not unique.</li>
<li>Consequence:
<ul>
<li>Spikes and dips in statistics/aggregations.</li>
<li>Error coordinating activities from different time zones.</li>
</ul>
</li>
</ul>
</li>
<li>Instead:
<ul>
<li>Log timestamps in UTC.</li>
<li>Alternatively, log in local time and include an offset.</li>
</ul>
</li>
</ul>
<h2 id="servers-time-zone"><a class="header" href="#servers-time-zone">Server's Time Zone</a></h2>
<ul>
<li>Don't Use the Server's Time Zone</li>
<li>Server side code should not depend on the server's time zone.
<ul>
<li>Users can be in different time zones.</li>
<li>An administrator might change the server's time zone.</li>
</ul>
</li>
<li>Recommendation: Store data in UTC, or as DateTimeOffset.</li>
</ul>
<h2 id="database-data-types"><a class="header" href="#database-data-types">Database Data Types</a></h2>
<ul>
<li>Date and Time values should never be stored as strings (Eg: CHAR,
VARCHAR etc) in a database.</li>
<li>SQL Server
<ul>
<li>DATETIME2, DATETIME, SMALLDATETIME</li>
<li>DATETIMEOFFSET</li>
<li>DATE</li>
<li>TIME (time-of-day)</li>
<li>Caution: TIMESTAMP is not a date/time type</li>
</ul>
</li>
<li>MySQL
<ul>
<li>TIMESTAMP (Best to avoid)</li>
<li>DATETIME</li>
<li>TIME (elapsed time)</li>
<li>YEAR (Recommendation: Use integer field instead)</li>
<li>Recommendation: To store UTC values, just store them in DATETIME
field.</li>
</ul>
</li>
<li>PostgreSQL
<ul>
<li>TIMESTAMP: Stores date and time without any time zone
information at all.</li>
<li>TIMESTAMP WITH TIME ZONE: Normalizes the value to UTC and
converts back to session's time zone on retrieval. Best to avoid
this.</li>
<li>DATE: Date only values.</li>
<li>TIME (time-of-day)</li>
<li>TIME WITH TIME ZONE: Stores time of day with offset.</li>
<li>INTERVAL: Can use to store elapsed times or calendrical periods.</li>
<li>Recommendation: To store UTC values, use TIMESTAMP type.</li>
</ul>
</li>
</ul>
<h2 id="working-with-ranges"><a class="header" href="#working-with-ranges">Working with Ranges</a></h2>
<ul>
<li>Date + Time Ranges should be treated as half open intervals
<ul>
<li>[Start, end)</li>
<li>Duration calculation: end - start</li>
<li>Value Comparison: (start &lt;= value AND end &gt; value)</li>
</ul>
</li>
<li>Date ranges should be treated as fully closed intervals.
<ul>
<li>[start, end]</li>
<li>Duration calculation: end - start + 1</li>
<li>Value comparison: (start &lt;= value AND end &gt;= value)</li>
</ul>
</li>
<li>Time ranges should be treated as half open intervals
<ul>
<li>[start, end)</li>
<li>Duration calculation:
<ul>
<li>start &lt;= end ? end - start : end - start + 24 hours</li>
</ul>
</li>
<li>Value Comparion
<ul>
<li>start &lt;= end ? (start &lt;= value AND end &gt; value) : (start
&lt;= value OR end &gt; value)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="scheduling-future-events"><a class="header" href="#scheduling-future-events">Scheduling Future Events</a></h2>
<ul>
<li>Record the time for the events.
<ul>
<li>Future time should be record in Local time, <strong>not UTC</strong> (Goes
against the normal advice!). Reasons:
<ul>
<li>Daylight Saving Time: Time zones change their offset
periodically for DST. If you schedule a daily event at a
particular time, then the event should fire at the same time
every day.</li>
<li>Time zone rules can change.</li>
</ul>
</li>
</ul>
</li>
<li>Record the time zone associated with the event.</li>
<li>Project UTC or DateTimeOffset value for next occurence.
<ul>
<li>Revise projections whenever updating time zone data.</li>
</ul>
</li>
<li>Establish rules for dealing with DST gaps and overlays.</li>
<li>Example of running a cron job at 6:00 AM Pacific Time
<ul>
<li>Save in Database: &quot;Daily&quot;, &quot;06:00&quot;,
&quot;America/Los<sub>Angeles</sub>&quot;</li>
<li>Daily is not same as &quot;every 24 hours&quot;. Because not all days have
24 hours due to Daylight saving time transitions.</li>
<li>Project next occurences.</li>
</ul>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

                <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
